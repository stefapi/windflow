# ============================================================================
# CONFIGURATION WINDFLOW - TEMPLATE
# ============================================================================
# Copiez ce fichier vers .env et configurez les valeurs selon votre environnement

# ============================================================================
# ARCHITECTURE MODULAIRE - EXTENSIONS
# ============================================================================

# Extensions activées (séparées par des virgules)
# Valeurs possibles: monitoring, logging, vault, sso, ai, kubernetes, swarm
WINDFLOW_EXTENSIONS=

# Extension: Monitoring (Prometheus + Grafana)
ENABLE_PROMETHEUS=false
ENABLE_GRAFANA=false
PROMETHEUS_RETENTION=15d

# Extension: Logging (ELK Stack)
ENABLE_ELK=false
ENABLE_ELASTICSEARCH=false
ENABLE_LOGSTASH=false
ENABLE_KIBANA=false
ELASTICSEARCH_MEMORY=2g

# Extension: Secrets Management (HashiCorp Vault)
ENABLE_VAULT=false

# Extension: SSO (Keycloak)
ENABLE_KEYCLOAK=false
KEYCLOAK_ADMIN_USER=admin
KEYCLOAK_ADMIN_PASSWORD=change-this-keycloak-password

# Extension: Intelligence Artificielle (LiteLLM + Ollama)
ENABLE_AI=false
ENABLE_LITELLM=false
ENABLE_OLLAMA=false

# Extension: Orchestration
ENABLE_KUBERNETES=false
ENABLE_SWARM=false

# ============================================================================
# APPLICATION
# ============================================================================

# Configuration générale
DOMAIN=localhost
ENVIRONMENT=development
LOG_LEVEL=INFO
SECRET_KEY=change-this-secret-key-in-production-use-openssl-rand-hex-32

# ============================================================================
# BASE DE DONNÉES
# ============================================================================

# PostgreSQL
POSTGRES_PASSWORD=change-this-password
DATABASE_URL=postgresql://windflow:change-this-password@postgres:5432/windflow

# Redis (OPTIONNEL - uniquement si utilisé comme broker Celery ou cache)
REDIS_ENABLED=false
REDIS_PASSWORD=change-this-redis-password
REDIS_URL=redis://:change-this-redis-password@redis:6379/0

# ============================================================================
# SÉCURITÉ ET AUTHENTIFICATION
# ============================================================================

# HashiCorp Vault (pour la gestion des secrets)
VAULT_TOKEN=change-this-vault-token
VAULT_URL=http://vault:8200

# JWT Configuration
JWT_SECRET_KEY=dev-secret-key-change-in-production-please-use-a-long-random-string
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60
REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================================================
# CELERY - TÂCHES ASYNCHRONES
# ============================================================================

# Configuration Celery (tâches de déploiement, backups, etc.)
CELERY_ENABLED=false

# Type de broker: "database" (PostgreSQL recommandé) ou "redis"
CELERY_BROKER_TYPE=database

# URLs optionnelles (si vides, dérivées automatiquement de DATABASE_URL)
# Pour PostgreSQL: laissez vide, sera auto-configuré
# Pour Redis: définissez explicitement
CELERY_BROKER_URL=
CELERY_RESULT_BACKEND=

# Exemple avec Redis (si CELERY_BROKER_TYPE=redis):
# CELERY_BROKER_URL=redis://:change-this-redis-password@redis:6379/1
# CELERY_RESULT_BACKEND=redis://:change-this-redis-password@redis:6379/2

# ============================================================================
# MONITORING ET OBSERVABILITÉ
# ============================================================================

# Grafana (monitoring)
GRAFANA_PASSWORD=change-this-grafana-password

# Flower (monitoring Celery)
FLOWER_USER=admin
FLOWER_PASSWORD=change-this-flower-password

# Prometheus
PROMETHEUS_RETENTION=15d

# ============================================================================
# SERVICES EXTERNES
# ============================================================================

# Configuration Email/SMTP
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_USE_TLS=true
SMTP_USE_SSL=false

# Email par défaut
EMAIL_FROM=noreply@windflow.local

# ============================================================================
# INTELLIGENCE ARTIFICIELLE (OPTIONNEL)
# ============================================================================

# OpenAI
# OPENAI_API_KEY=sk-your-openai-key-here

# Anthropic Claude
# ANTHROPIC_API_KEY=sk-ant-your-anthropic-key-here

# Ollama (auto-hébergé)
# OLLAMA_URL=http://localhost:11434

# Configuration LLM par défaut
LLM_PROVIDER=openai
LLM_MODEL=gpt-4-turbo-preview
LLM_TEMPERATURE=0.1
LLM_MAX_TOKENS=2000

# ============================================================================
# DOCKER ET DÉPLOIEMENT
# ============================================================================

# Docker Registry
DOCKER_REGISTRY=windflow
DOCKER_TAG=latest

# Compose
COMPOSE_PROJECT_NAME=windflow

# ============================================================================
# DÉVELOPPEMENT ET DEBUG
# ============================================================================

# Mode debug (development uniquement)
DEBUG=false

# Rechargement automatique (development uniquement)
RELOAD=false

# Profiling (development uniquement)
PROFILING=false

# ============================================================================
# UTILISATEUR ADMIN INITIAL
# ============================================================================

# Super administrateur par défaut (changez ces valeurs!)
SUPERADMIN_USERNAME=admin
SUPERADMIN_EMAIL=admin@windflow.local
SUPERADMIN_PASSWORD=change-this-admin-password

# ============================================================================
# LIMITES ET PERFORMANCE
# ============================================================================

# Limites de taux
RATE_LIMIT_PER_MINUTE=100

# Taille des pools de connexions
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30

# Timeouts
REQUEST_TIMEOUT=30
CELERY_TASK_TIMEOUT=300

# ============================================================================
# FONCTIONNALITÉS OPTIONNELLES
# ============================================================================

# Activation des fonctionnalités expérimentales
ENABLE_LLM_OPTIMIZATION=true
ENABLE_AUTO_SCALING=false
ENABLE_BACKUP_AUTOMATION=true

# Intégrations externes
ENABLE_SLACK_NOTIFICATIONS=false
ENABLE_DISCORD_NOTIFICATIONS=false

# ============================================================================
# SAUVEGARDES
# ============================================================================

# Configuration des sauvegardes automatiques
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE=0 2 * * *  # Tous les jours à 2h du matin

# Stockage des sauvegardes
BACKUP_STORAGE=local
# BACKUP_S3_BUCKET=windflow-backups
# BACKUP_S3_REGION=eu-west-1

# ============================================================================
# NOTES DE SÉCURITÉ
# ============================================================================

# IMPORTANT:
# 1. Changez TOUS les mots de passe par défaut
# 2. Utilisez des secrets forts générés aléatoirement
# 3. Ne commitez jamais le fichier .env dans git
# 4. Utilisez Vault pour la gestion des secrets en production
# 5. Activez HTTPS en production
#
# Génération de secrets sécurisés:
# SECRET_KEY: openssl rand -hex 32
# PASSWORDS: openssl rand -base64 32
# TOKENS: openssl rand -hex 16
